{# templates/admin/index.html.twig #}

{% extends "base.html.twig" %}

{% block title %}Admin. |
	{{ parent() }}
{% endblock %}

{% block content %}
	<div class="admin-page">
		<div class="container">
			<div class="row">
				<div class="col s12">
					<a href="{{ path('article_add') }}" class="btn blue darken-4" style="float: right">Ajouter</a>
					<h5>Articles</h5>
					{% if articles is empty %}
						<em>Aucun article n'a été trouvé, veuillez créer votre première article</em>
					{% else %}
					<table>
						<tr>
							<th>#</th>
							<th>Titre</th>
							<th>Publier</th>
							<th>Date de publication</th>
							<th>Date de modification</th>
							<th>Actions</th>
						</tr>
						{% for article in articles %}
							<tr>
								<td>{{ loop.index }}</td>
								<td>
									<a href="{{ path('article_show', {'id': article.id}) }}" target="_blank">{{ article.title }}</a>
								</td>
								<td>
									<span class="new badge {{ article.isPublished ? 'blue' : 'red' }}" data-badge-caption="{{ article.isPublished ? 'oui' : 'non' }}"/>
								</td>
								<td>{{ article.isPublished ? article.publishedAt|date('d/m/Y') : '-' }}</td>
								<td>{{ article.updatedAt|date('d/m/Y') }}</td>
								<td>
									<a href="{{ path('article_edit', {'id': article.id}) }}">
										<i class="material-icons blue-text">edit</i>
									</a>
									<a href="{{ path('article_remove', {'id': article.id}) }}">
										<i class="material-icons red-text">delete</i>
									</a>
								</td>
							</tr>			
						{% endfor %}
					</table>
					{% endif %}
				</div>
			</div>

			<div class="row">
				<div class="col s12 m-t-30">
					<h5>Utilisateurs</h5>
					<table>
						<tr>
							<th>#</th>
							<th>Adresse email</th>
							<th>Username</th>
							<th>Roles</th>
							<th>Actions</th>
						</tr>
						{% for user in users %}
							<tr>
								<td>{{ loop.index }}</td>
								<td>{{ user.email }}</td>
								<td>{{ user.username }}</td>
								<td>
									<span class="new badge blue" data-badge-caption="{{ user.roles|join(', ') }}"/>
								</td>
								<td>
									<a href="">
										<i class="material-icons red-text">delete</i>
									</a>
								</td>
							</tr>
						{% endfor %}
					</table>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
